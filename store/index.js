export const state = () => ({
    globalData: [
        [{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},],
        [{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},],
        [{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},],
        [{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},],
        [{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},],
        [{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},],
        [{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},],
        [{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},],
        [{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},],
        [{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},{x: null, y: null, orientation: '', isClose: false, isShip: false, shipId: null},],
    ]
});

export const mutations = {
    changeData(state, cordinates) {
        if (cordinates.isShip) {
            state.globalData[cordinates.y][cordinates.x].isClose = true;
            state.globalData[cordinates.y][cordinates.x].isShip = true;
            state.globalData[cordinates.y][cordinates.x].shipId = cordinates.id;
            state.globalData[cordinates.y][cordinates.x].x = cordinates.y;
            state.globalData[cordinates.y][cordinates.x].y = cordinates.x;
            state.globalData[cordinates.y][cordinates.x].orientation = cordinates.orientation
        } else {
            state.globalData[cordinates.y][cordinates.x].isClose = true
        }
    },
    clearData(state, id) {
        state.globalData.forEach(row => {
            row.forEach(cell => {
                if (cell.shipId === id) {
                    cell.shipId = null;
                    cell.isShip = false;
                    cell.isClose = false;
                    cell.x = null;
                    cell.y = null;
                    cell.orientation = ''
                }
            })
        })
    },
    clearAllData(state) {
        state.globalData.forEach(row => {
            row.forEach(cell => {
                if (cell.isClose) {
                    cell.shipId = null;
                    cell.isShip = false;
                    cell.isClose = false;
                    cell.x = null;
                    cell.y = null;
                    cell.orientation = ''
                }
            })
        })
    }
};

export const actions = {
    setShip({commit}, cordinates) {
        commit('changeData', cordinates)
    },
    removeShip({commit}, id) {
        commit('clearData', id)
    },
    restartData({commit}) {
        commit('clearAllData')
    }
};

export const getters = {
    hasClose: state => options => {
        return state.globalData[options.y][options.x].isShip
    },
    compilationAllData: state => () => {
        const ships = [];

        state.globalData.forEach(row => {
            row.forEach(({isShip, shipId, x, y, orientation}) => {
                let closed = false;
                ships.forEach(el => {
                    if (el.ship === shipId) {
                        closed = true
                    }
                });
                if (isShip && !closed) {
                    ships.push({ship: shipId, x, y, orientation})
                }
            })
        });

        return ships
    }
};